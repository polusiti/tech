{"remainingRequest":"/home/higuc/polusiti-tech/slee/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/higuc/polusiti-tech/slee/docs/.vuepress/components/Fantasy.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/higuc/polusiti-tech/slee/docs/.vuepress/components/Fantasy.vue","mtime":1761327412131},{"path":"/home/higuc/polusiti-tech/slee/node_modules/cache-loader/dist/cjs.js","mtime":1761329323494},{"path":"/home/higuc/polusiti-tech/slee/node_modules/babel-loader/lib/index.js","mtime":1761329323866},{"path":"/home/higuc/polusiti-tech/slee/node_modules/cache-loader/dist/cjs.js","mtime":1761329323494},{"path":"/home/higuc/polusiti-tech/slee/node_modules/vue-loader/lib/index.js","mtime":1761329324398}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgLy8g5Y+q5pyJ5LiA5LiqIGZhbnRhc3kg5YWD57Sg77yM6Ziy5q2i6YeN5aSN5Yqg6L295aSa5Liq5Zu+54mHCiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImZhbnRhc3kiKT8ubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgIC8vIOWmguaenOS9v+eUqCBJbmRleEJpZ0ltZy52dWXvvIzliJnljrvmjonor6Xnu4Tku7bmj5DkvpvnmoTml7bpl7TnvakKICAgICAgICAgICAgdGhpcy5jbGVhckJhbm5lckNvbG9yKCk7CiAgICAgICAgICAgIC8vIOWmguaenOaYr+WcqOmmlumhteazqOWGjOivpee7hOS7tu+8jOWImeaMgui9veWIsOato+ehrueahOS9jee9rgogICAgICAgICAgICBpZiAodGhpcy4kYXR0cnMuaW5kZXgpIHsKICAgICAgICAgICAgICAgIHRoaXMubW91bnRlZEVsZW1lbnQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGluaXQoKSB7CiAgICAgICAgICAgIHZhciBjdnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY3ZzIik7CiAgICAgICAgICAgIGlmICghY3ZzKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGN0eCA9IGN2cy5nZXRDb250ZXh0KCIyZCIpOwoKICAgICAgICAgICAgdmFyIGRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGlzcGxheSIpOwogICAgICAgICAgICB2YXIgZGlzcGxheUN0eCA9IGRpc3BsYXkuZ2V0Q29udGV4dCgiMmQiKTsKCiAgICAgICAgICAgIHZhciBzY3JlZW5JbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzY3JlZW5JbWFnZSIpOwogICAgICAgICAgICB2YXIgc2NyZWVuSW1hZ2VDdHggPSBzY3JlZW5JbWFnZS5nZXRDb250ZXh0KCIyZCIpOwoKICAgICAgICAgICAgdmFyIHJpbGkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmlsaSIpOwogICAgICAgICAgICB2YXIgcmlsaUN0eCA9IHJpbGkuZ2V0Q29udGV4dCgiMmQiKTsKCiAgICAgICAgICAgIHZhciBzb25nSW5mbyA9IHt9OwogICAgICAgICAgICB2YXIgQWxsVGltZUJhayA9IDA7CiAgICAgICAgICAgIHZhciBOb3dCYWsgPSAwOwogICAgICAgICAgICB2YXIgRHJhd1dhcm5pbmcgPSBmYWxzZTsKICAgICAgICAgICAgdmFyIEVuTW9udGggPSBmYWxzZTsKCiAgICAgICAgICAgIC8vIOWHuuWkhO+8mmh0dHBzOi8vYmxvZy5jc2RuLm5ldC91MDEyNjAxMTk1L2FydGljbGUvZGV0YWlscy80Nzg2MDYxNwogICAgICAgICAgICBmdW5jdGlvbiBkcmF3UmlsaSgpIHsKICAgICAgICAgICAgICAgIHJpbGlDdHguY2xlYXJSZWN0KDAsIDAsIDYwMCwgNjAwKTsKICAgICAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRZZWFyKCk7CiAgICAgICAgICAgICAgICB2YXIgbW91dGggPSBkYXRlLmdldE1vbnRoKCk7CiAgICAgICAgICAgICAgICB2YXIgdG9kYXkgPSBkYXRlLmdldERhdGUoKTsKICAgICAgICAgICAgICAgIHZhciB3ZWVrID0gZGF0ZS5nZXREYXkoKTsKCiAgICAgICAgICAgICAgICB2YXIgY2FyZFNpemUgPSA0MDsKCiAgICAgICAgICAgICAgICB2YXIgYXJyYXlfdGhyZWUgPSBbNCwgNiwgOSwgMTFdOwogICAgICAgICAgICAgICAgdmFyIGFycmF5X3RocmVlb25lID0gWzEsIDMsIDUsIDcsIDgsIDEwLCAxMl07CiAgICAgICAgICAgICAgICB2YXIgYXJyYXlfd2VlayA9IFsiU1VOIiwgIk1PTiIsICJUVUVTIiwgIldFRCIsICJUSFVSIiwgIkZSSSIsICJTQVQiXTsKCiAgICAgICAgICAgICAgICB2YXIgZmlyc3REcmF3OyAvLzHlj7fnu5jliLbkvY3nva4KICAgICAgICAgICAgICAgIHZhciB3SWR4ID0gKHRvZGF5IC0gMSkgJSA3OwoKICAgICAgICAgICAgICAgIGlmICh3ZWVrID49IHdJZHgpIHsKICAgICAgICAgICAgICAgICAgICBmaXJzdERyYXcgPSB3ZWVrIC0gd0lkeDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZmlyc3REcmF3ID0gd2VlayAtIHdJZHggKyA3OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBkYXlJbmRleCA9IDE7CiAgICAgICAgICAgICAgICB2YXIgY291bnREYXkgPSAzMDsKCiAgICAgICAgICAgICAgICBpZiAoYXJyYXlfdGhyZWUuaW5kZXhPZihtb3V0aCArIDEpID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICBjb3VudERheSA9IDMwOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhcnJheV90aHJlZW9uZS5pbmRleE9mKG1vdXRoICsgMSkgPiAtMSkgewogICAgICAgICAgICAgICAgICAgIGNvdW50RGF5ID0gMzE7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmICgoeWVhciAlIDQgPT0gMCAmJiB5ZWFyICUgMTAwICE9IDApIHx8IHllYXIgJSA0MDAgPT0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgY291bnREYXkgPSAyOTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGNvdW50RGF5ID0gMjg7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIHJvdyA9IDY7CiAgICAgICAgICAgICAgICAvLyBpZiAoNyAtIGZpcnN0RHJhdyArIDcgKiA0IDwgY291bnREYXkpIHsgLy/noa7lrprooajmoLzooYzmlbDvvIzpmLLmraLml6XmnJ/nu5jliLbkuI3lhagKICAgICAgICAgICAgICAgIC8vICAgICByb3cgPSA3OwogICAgICAgICAgICAgICAgLy99CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZHJhd1RvZGF5YmcoaSwgaikgewogICAgICAgICAgICAgICAgICAgIHJpbGlDdHguc2F2ZSgpOwoKICAgICAgICAgICAgICAgICAgICByaWxpQ3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgIHJpbGlDdHguc3Ryb2tlU3R5bGUgPSAiIzkwMCI7CiAgICAgICAgICAgICAgICAgICAgcmlsaUN0eC5hcmMoCiAgICAgICAgICAgICAgICAgICAgICAgIDQ1ICsgaSAqIGNhcmRTaXplICogMS43ICsgY2FyZFNpemUgLyAxLjE4LAogICAgICAgICAgICAgICAgICAgICAgICA1MCArIGogKiBjYXJkU2l6ZSArIGNhcmRTaXplIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgY2FyZFNpemUgLyAyIC0gMTAsCiAgICAgICAgICAgICAgICAgICAgICAgIC1NYXRoLlBJLAogICAgICAgICAgICAgICAgICAgICAgICBNYXRoLlBJICogMQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgcmlsaUN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICByaWxpQ3R4LmNsb3NlUGF0aCgpOwoKICAgICAgICAgICAgICAgICAgICByaWxpQ3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgIHJpbGlDdHguYXJjKAogICAgICAgICAgICAgICAgICAgICAgICA0NSArIGkgKiBjYXJkU2l6ZSAqIDEuNyArIGNhcmRTaXplIC8gMS4xOCwKICAgICAgICAgICAgICAgICAgICAgICAgNTAgKyBqICogY2FyZFNpemUgKyBjYXJkU2l6ZSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRTaXplIC8gMiAtIDksCiAgICAgICAgICAgICAgICAgICAgICAgIC1NYXRoLlBJLAogICAgICAgICAgICAgICAgICAgICAgICBNYXRoLlBJICogMC45CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICByaWxpQ3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgIHJpbGlDdHguY2xvc2VQYXRoKCk7CgogICAgICAgICAgICAgICAgICAgIHJpbGlDdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgcmlsaUN0eC5hcmMoCiAgICAgICAgICAgICAgICAgICAgICAgIDQ1ICsgaSAqIGNhcmRTaXplICogMS43ICsgY2FyZFNpemUgLyAxLjE4LAogICAgICAgICAgICAgICAgICAgICAgICA1MCArIGogKiBjYXJkU2l6ZSArIGNhcmRTaXplIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgY2FyZFNpemUgLyAyIC0gOCwKICAgICAgICAgICAgICAgICAgICAgICAgLU1hdGguUEksCiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguUEkgKiAwLjgKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIHJpbGlDdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgcmlsaUN0eC5jbG9zZVBhdGgoKTsKCiAgICAgICAgICAgICAgICAgICAgcmlsaUN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICByaWxpQ3R4LmFyYygKICAgICAgICAgICAgICAgICAgICAgICAgNDUgKyBpICogY2FyZFNpemUgKiAxLjcgKyBjYXJkU2l6ZSAvIDEuMTgsCiAgICAgICAgICAgICAgICAgICAgICAgIDUwICsgaiAqIGNhcmRTaXplICsgY2FyZFNpemUgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICBjYXJkU2l6ZSAvIDIgLSA3LAogICAgICAgICAgICAgICAgICAgICAgICAtTWF0aC5QSSwKICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5QSSAqIDAuNwogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgcmlsaUN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICByaWxpQ3R4LmNsb3NlUGF0aCgpOwoKICAgICAgICAgICAgICAgICAgICByaWxpQ3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgIHJpbGlDdHguYXJjKAogICAgICAgICAgICAgICAgICAgICAgICA0NSArIGkgKiBjYXJkU2l6ZSAqIDEuNyArIGNhcmRTaXplIC8gMS4xOCwKICAgICAgICAgICAgICAgICAgICAgICAgNTAgKyBqICogY2FyZFNpemUgKyBjYXJkU2l6ZSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRTaXplIC8gMiAtIDYsCiAgICAgICAgICAgICAgICAgICAgICAgIC1NYXRoLlBJLAogICAgICAgICAgICAgICAgICAgICAgICBNYXRoLlBJICogMC42CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICByaWxpQ3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgIHJpbGlDdHguY2xvc2VQYXRoKCk7CgogICAgICAgICAgICAgICAgICAgIHJpbGlDdHgucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBpc051bSA9IC9eXFxkKyhcXGQrKT8kLzsKCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkcmF3RGF0ZSh0eHQsIGksIGopIHsKICAgICAgICAgICAgICAgICAgICByaWxpQ3R4LnRleHRBbGlnbiA9ICJjZW50ZXIiOwogICAgICAgICAgICAgICAgICAgIHJpbGlDdHguZmlsbFN0eWxlID0gInJnYig2OSw2OCw4NCkiOwogICAgICAgICAgICAgICAgICAgIHJpbGlDdHguZm9udCA9IGNhcmRTaXplIC8gMS41ICsgInB4IEltcGFjdCI7CiAgICAgICAgICAgICAgICAgICAgdmFyIHlPZmZlc3QgPSAzOwoKICAgICAgICAgICAgICAgICAgICBpZiAoKGogPT0gMCB8fCBqID09IDYpICYmIGlzTnVtLnRlc3QodHh0KSkgewogICAgICAgICAgICAgICAgICAgICAgICByaWxpQ3R4LmZpbGxTdHlsZSA9ICIjOTAwIjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJpbGlDdHguZmlsbFRleHQoCiAgICAgICAgICAgICAgICAgICAgICAgIHR4dC50b1N0cmluZygpLAogICAgICAgICAgICAgICAgICAgICAgICA0NSArIGogKiBjYXJkU2l6ZSAqIDEuNyArIGNhcmRTaXplIC8gMS4xOCwKICAgICAgICAgICAgICAgICAgICAgICAgNTAgKyBpICogY2FyZFNpemUgKyAoY2FyZFNpemUgLyAzKSAqIDIgKyB5T2ZmZXN0CiAgICAgICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHR4dCA9PSB0b2RheSkgewogICAgICAgICAgICAgICAgICAgICAgICBkcmF3VG9kYXliZyhqLCBpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmlsaUN0eC5maWxsU3R5bGUgPSAicmdiKDY5LDY4LDg0KSI7CiAgICAgICAgICAgICAgICByaWxpQ3R4LmZvbnQgPSAiOTAwIDI2cHQgU2ltSGVpIjsKICAgICAgICAgICAgICAgIHJpbGlDdHgudGV4dEFsaWduID0gImNlbnRlciI7CiAgICAgICAgICAgICAgICB2YXIgbW9udGhDTiA9IFsKICAgICAgICAgICAgICAgICAgICAi5LiAIiwKICAgICAgICAgICAgICAgICAgICAi5LqMIiwKICAgICAgICAgICAgICAgICAgICAi5LiJIiwKICAgICAgICAgICAgICAgICAgICAi5ZubIiwKICAgICAgICAgICAgICAgICAgICAi5LqUIiwKICAgICAgICAgICAgICAgICAgICAi5YWtIiwKICAgICAgICAgICAgICAgICAgICAi5LiDIiwKICAgICAgICAgICAgICAgICAgICAi5YWrIiwKICAgICAgICAgICAgICAgICAgICAi5LmdIiwKICAgICAgICAgICAgICAgICAgICAi5Y2BIiwKICAgICAgICAgICAgICAgICAgICAi5Y2B5LiAIiwKICAgICAgICAgICAgICAgICAgICAi5Y2B5LqMIiwKICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgICB2YXIgbW9udGhFTiA9IFsKICAgICAgICAgICAgICAgICAgICAiIEphbnVhcnkiLAogICAgICAgICAgICAgICAgICAgICJGZWJydWFyeSIsCiAgICAgICAgICAgICAgICAgICAgIiAgTWFyY2giLAogICAgICAgICAgICAgICAgICAgICIgIEFwcmlsIiwKICAgICAgICAgICAgICAgICAgICAiICAgTWF5IiwKICAgICAgICAgICAgICAgICAgICAiICBKdW5lIiwKICAgICAgICAgICAgICAgICAgICAiICBKdWx5IiwKICAgICAgICAgICAgICAgICAgICAiIEF1Z3VzdCIsCiAgICAgICAgICAgICAgICAgICAgIlNlcHRlbWJlciIsCiAgICAgICAgICAgICAgICAgICAgIiBPY3RvYmVyIiwKICAgICAgICAgICAgICAgICAgICAiTm92ZW1iZXIiLAogICAgICAgICAgICAgICAgICAgICIgRGVjZW1iZXIiLAogICAgICAgICAgICAgICAgXTsKCiAgICAgICAgICAgICAgICBpZiAoRW5Nb250aCkgewogICAgICAgICAgICAgICAgICAgIHJpbGlDdHguc2NhbGUoMS4xLCAxKTsKICAgICAgICAgICAgICAgICAgICByaWxpQ3R4LmZpbGxUZXh0KG1vbnRoRU5bbW91dGhdLCAyNDUsIDMyKTsKICAgICAgICAgICAgICAgICAgICByaWxpQ3R4LnJlc2V0VHJhbnNmb3JtKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJpbGlDdHguc2NhbGUoMS4xLCAxKTsKICAgICAgICAgICAgICAgICAgICByaWxpQ3R4LmZpbGxUZXh0KG1vbnRoQ05bbW91dGhdICsgIuaciCIsIDI2MCwgMzIpOwogICAgICAgICAgICAgICAgICAgIHJpbGlDdHgucmVzZXRUcmFuc2Zvcm0oKTsKCiAgICAgICAgICAgICAgICAgICAgcmlsaUN0eC5mb250ID0gIjIwcHQgU2ltSGVpIjsKICAgICAgICAgICAgICAgICAgICByaWxpQ3R4LnRleHRBbGlnbiA9ICJlbmQiOwogICAgICAgICAgICAgICAgICAgIHJpbGlDdHguZmlsbFRleHQodG9kYXkgKyAi5pelIiwgNTIwLCAzOCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3c7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgNzsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJpbGlDdHguc3Ryb2tlUmVjdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDQ1ICsgaiAqIGNhcmRTaXplICogMS43LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgNTAgKyBpICogY2FyZFNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkU2l6ZSAqIDEuNywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRTaXplCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRheUluZGV4ID0gMTsKCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvdzsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgLy/lvIDlp4vnu5jliLbml6XmnJ/mlbAKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDc7IGorKykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+ihqOagvOesrOS4gOihjOe7mOWItuaYn+acnwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhd0RhdGUoYXJyYXlfd2Vla1tqXSwgaSwgaik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gMSAmJiBqIDwgZmlyc3REcmF3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+ehruWumjHlj7fnu5jliLbkvY3nva4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF5SW5kZXggPiBjb3VudERheSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lj6rnu5jliLbmnIjku73nmoTlpKnmlbAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBkcmF3RGF0ZShkYXlJbmRleCsrLCBpLCBqKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciByaWxpSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChkcmF3UmlsaSwgMzYwMDAwMCk7CiAgICAgICAgICAgIGRyYXdSaWxpKCk7CgogICAgICAgICAgICAvLyBDYW52YXPlpYflppnnmoTliarliIfokpnniYjlrp7njrAKICAgICAgICAgICAgdmFyIHNjcmVlbk1hc2sgPSBuZXcgSW1hZ2UoKTsKICAgICAgICAgICAgc2NyZWVuTWFzay5zcmMgPSB0aGlzLiR3aXRoQmFzZSgnL2ZhbnRhc3kvU2NyZWVubWFzay5wbmcnKTsKCiAgICAgICAgICAgIHZhciBzY3JlZW4gPSBuZXcgSW1hZ2UoKTsKICAgICAgICAgICAgc2NyZWVuLnNyYyA9IHRoaXMuJHdpdGhCYXNlKCcvZmFudGFzeS9zY3JlZW4ucG5nJyk7CgogICAgICAgICAgICB2YXIgaXYgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoc2NyZWVuLmNvbXBsZXRlICYmIHNjcmVlbk1hc2suY29tcGxldGUpIHsKICAgICAgICAgICAgICAgICAgICAvLyDlj6/ku6XliIfmjaLlm77niYfnmoTkvY3nva7vvIzkuZ/lj6/ku6XmjaLmiJDoh6rlt7HnmoTlm77niYcKICAgICAgICAgICAgICAgICAgICBzY3JlZW5JbWFnZUN0eC5kcmF3SW1hZ2Uoc2NyZWVuLCAtMzAwLCAtNTAsIDEyODAsIDcyMCk7CiAgICAgICAgICAgICAgICAgICAgc2NyZWVuSW1hZ2VDdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gImRlc3RpbmF0aW9uLWF0b3AiOwogICAgICAgICAgICAgICAgICAgIHNjcmVlbkltYWdlQ3R4LmRyYXdJbWFnZShzY3JlZW5NYXNrLCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICBzY3JlZW5JbWFnZUN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAic291cmNlLW92ZXIiOwogICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaXYpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCAxNCk7CgogICAgICAgICAgICAvLyDlpYflppnnmoTlsY/luZXlpKflsI/oh6rpgILlupQKICAgICAgICAgICAgd2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZGlzcGxheS53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOwogICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0ID4gMS44MzMzMzMzMzMzMzMzKSB7CiAgICAgICAgICAgICAgICAgICAgZGlzcGxheS5oZWlnaHQgPSAod2luZG93LmlubmVyV2lkdGggLyAxOTgwKSAqIDEwODA7CiAgICAgICAgICAgICAgICAgICAgLy8gd2luZG93LnNjcm9sbFRvKDAsICh3aW5kb3cuaW5uZXJIZWlnaHQgLSAxMjMpIC8gMTYpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5LmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHdpbmRvdy5vbnJlc2l6ZSgpOwoKICAgICAgICAgICAgLy8g5Yqg6L295Zu+54mHCiAgICAgICAgICAgIHZhciBiZyA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgICBiZy5zcmMgPSB0aGlzLiR3aXRoQmFzZSgnL2ZhbnRhc3kvYmcucG5nJyk7CgogICAgICAgICAgICB2YXIgbWFzayA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgICBtYXNrLnNyYyA9IHRoaXMuJHdpdGhCYXNlKCcvZmFudGFzeS9tYXNrLnBuZycpOwoKICAgICAgICAgICAgdmFyIGxpZ2h0ID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgIGxpZ2h0LnNyYyA9IHRoaXMuJHdpdGhCYXNlKCcvZmFudGFzeS9saWdodC5wbmcnKTsKCiAgICAgICAgICAgIHZhciBjYWlkYWkgPSBuZXcgSW1hZ2UoKTsKICAgICAgICAgICAgY2FpZGFpLnNyYyA9IHRoaXMuJHdpdGhCYXNlKCcvZmFudGFzeS9jYWlkYWkucG5nJyk7CgogICAgICAgICAgICAvLyAvZmFudGFzeS9TY3JlZW5tYXNrLnBuZwogICAgICAgICAgICB2YXIgdHdvID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgIHR3by5zcmMgPSB0aGlzLiR3aXRoQmFzZSgnL2ZhbnRhc3kvMjIucG5nJyk7CgogICAgICAgICAgICB2YXIgc2NyZWVuTGlnaHQgPSBuZXcgSW1hZ2UoKTsKICAgICAgICAgICAgc2NyZWVuTGlnaHQuc3JjID0gdGhpcy4kd2l0aEJhc2UoJy9mYW50YXN5L3NjcmVlbkxpZ2h0LnBuZycpOwoKICAgICAgICAgICAgdmFyIHBob25lTGlnaHQgPSBuZXcgSW1hZ2UoKTsKICAgICAgICAgICAgcGhvbmVMaWdodC5zcmMgPSB0aGlzLiR3aXRoQmFzZSgnL2ZhbnRhc3kvcGhvbmVMaWdodC5wbmcnKTsKCiAgICAgICAgICAgIHZhciBwaG9uZVRleHQgPSBKU09OLnBhcnNlKAogICAgICAgICAgICAgICAgJ1t7InRpbWUiOjAsInRleHQiOiLlh4zmmajllaYhIn0seyJ0aW1lIjo2LCJ0ZXh0Ijoi5pep5LiK5aW9ISJ9LHsidGltZSI6OCwidGV4dCI6IuS4iuWNiOWlvSEifSx7InRpbWUiOjExLCJ0ZXh0Ijoi5L2g5ZCD5LqG5ZCXIn0seyJ0aW1lIjoxMywidGV4dCI6IuS4i+WNiOWlvem4rSEifSx7InRpbWUiOjE2LCJ0ZXh0Ijoi5YKN5pma5ZKvISJ9LHsidGltZSI6MTksInRleHQiOiLmmZrlrokhIn1dJwogICAgICAgICAgICApOwoKICAgICAgICAgICAgdmFyIG5vUmlsaSA9IGZhbHNlOwogICAgICAgICAgICB2YXIgdXBkYXRlU29uZ0luZm9IYW5kbGVyID0gLTE7CgogICAgICAgICAgICB2YXIgZGF0YSA9IG5ldyBBcnJheSgxMjgpOwogICAgICAgICAgICB2YXIgYW5pbURhdGEgPSBuZXcgQXJyYXkoMTI4KTsKICAgICAgICAgICAgdmFyIFNvdW5kUGxheWluZyA9IGZhbHNlOwoKICAgICAgICAgICAgLy8g5aWH5aaZ55qE5Yid5aeL5YyWCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTI4OyBpKyspIHsKICAgICAgICAgICAgICAgIGRhdGFbaV0gPSBhbmltRGF0YVtpXSA9IDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIOWlh+WmmeeahE5vcm1hbGl6ZQogICAgICAgICAgICB2YXIgcGVha1ZhbHVlID0gMTsKICAgICAgICAgICAgaWYgKHdpbmRvdy53YWxscGFwZXJSZWdpc3RlckF1ZGlvTGlzdGVuZXIpIHsKICAgICAgICAgICAgICAgIHdpbmRvdy53YWxscGFwZXJSZWdpc3RlckF1ZGlvTGlzdGVuZXIoZnVuY3Rpb24gKGF1ZGlvRGF0YSkgewogICAgICAgICAgICAgICAgICAgIHZhciBtYXggPSAwOwoKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEyODsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdWRpb0RhdGFbaV0gPiBtYXgpIG1heCA9IGF1ZGlvRGF0YVtpXTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHBlYWtWYWx1ZSA9IHBlYWtWYWx1ZSAqIDAuOTkgKyBtYXggKiAwLjAxOwoKICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNjQ7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBkYXRhWzYzIC0gaV0gPSBhdWRpb0RhdGFbaV0gLyBwZWFrVmFsdWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNjQ7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBkYXRhWzEyNyAtIGldID0gYXVkaW9EYXRhWzEyNyAtIGldOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFyIGl2YTsKICAgICAgICAgICAgICAgIGxldCBhdWRpbyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImFwbGF5ZXItYnV0dG9uIilbMF07CiAgICAgICAgICAgICAgICBpZiAoYXVkaW8pIHsKICAgICAgICAgICAgICAgICAgICBhdWRpby5vbmNsaWNrID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImFwbGF5ZXItcGxheSIpWzBdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGxheSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXZhID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCA2NDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlYWtWYWx1ZSA9IHBlYWtWYWx1ZSAqIDAuOTkgKyAxICogMC4wMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVs2MyAtIGldID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoTWF0aC5yYW5kb20oKSAqIDAuNCkgLyBwZWFrVmFsdWUpICogTWF0aC5yYW5kb20oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDY0OyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVsxMjcgLSBpXSA9IE1hdGgucmFuZG9tKCkgKiAwLjIgKiBNYXRoLnJhbmRvbSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgKHZhciBpID0gMDsgaSA8IDEyODsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGRhdGFbaV0gPSBNYXRoLnJhbmRvbSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGl2YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEyODsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtpXSA9IGFuaW1EYXRhW2ldID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIC4uLi4KICAgICAgICAgICAgZnVuY3Rpb24gbWluKGEsIGIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBhID4gYiA/IGIgOiBhOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBtYXgoYSwgYikgewogICAgICAgICAgICAgICAgcmV0dXJuIGEgPiBiID8gYSA6IGI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIOWlh+WmmeeahOminOiJsuWPmOWMlgogICAgICAgICAgICB2YXIgdGFyZ2V0Q29sb3IgPSB7cjogODAsIGc6IDEyMCwgYjogMTY5fTsKICAgICAgICAgICAgdmFyIGN1cnJlbnRDb2xvciA9IHtyOiA4MCwgZzogMTIwLCBiOiAxNjl9OwogICAgICAgICAgICB2YXIgbGlnaHRDb2xvciA9IHtyOiAwLCBnOiAzNCwgYjogNzcsIGE6IDB9OwoKICAgICAgICAgICAgZnVuY3Rpb24gY29sb3JUb1JnYihjb2xvcikgewogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAicmdiKCIgKwogICAgICAgICAgICAgICAgICAgIGNvbG9yLnIudG9TdHJpbmcoKSArCiAgICAgICAgICAgICAgICAgICAgIiwiICsKICAgICAgICAgICAgICAgICAgICBjb2xvci5nLnRvU3RyaW5nKCkgKwogICAgICAgICAgICAgICAgICAgICIsIiArCiAgICAgICAgICAgICAgICAgICAgY29sb3IuYi50b1N0cmluZygpICsKICAgICAgICAgICAgICAgICAgICAiKSIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbG9yVG9SZ2JhKGNvbG9yV2l0aEEpIHsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgInJnYmEoIiArCiAgICAgICAgICAgICAgICAgICAgY29sb3JXaXRoQS5yLnRvU3RyaW5nKCkgKwogICAgICAgICAgICAgICAgICAgICIsIiArCiAgICAgICAgICAgICAgICAgICAgY29sb3JXaXRoQS5nLnRvU3RyaW5nKCkgKwogICAgICAgICAgICAgICAgICAgICIsIiArCiAgICAgICAgICAgICAgICAgICAgY29sb3JXaXRoQS5iLnRvU3RyaW5nKCkgKwogICAgICAgICAgICAgICAgICAgICIsIiArCiAgICAgICAgICAgICAgICAgICAgY29sb3JXaXRoQS5hLnRvU3RyaW5nKCkgKwogICAgICAgICAgICAgICAgICAgICIpIgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIG5pZ2h0ID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBkZWJ1ZyA9IGZhbHNlOwoKICAgICAgICAgICAgLy8gQ2FudmFz55qE5aWH5aaZ5YaS6ZmpIQogICAgICAgICAgICBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEyODsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgYW5pbURhdGFbaV0gKz0gKGRhdGFbaV0gLSBhbmltRGF0YVtpXSkgKiAwLjM7CiAgICAgICAgICAgICAgICAgICAgYW5pbURhdGFbaV0gPSBtaW4oYW5pbURhdGFbaV0sIDEpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGN1cnJlbnRDb2xvci5yICs9ICh0YXJnZXRDb2xvci5yIC0gY3VycmVudENvbG9yLnIpICogMC4wMTsKICAgICAgICAgICAgICAgIGN1cnJlbnRDb2xvci5yID0gbWluKGN1cnJlbnRDb2xvci5yLCAyNTUpOwogICAgICAgICAgICAgICAgY3VycmVudENvbG9yLnIgPSBtYXgoY3VycmVudENvbG9yLnIsIDApOwoKICAgICAgICAgICAgICAgIGN1cnJlbnRDb2xvci5nICs9ICh0YXJnZXRDb2xvci5nIC0gY3VycmVudENvbG9yLmcpICogMC4wMTsKICAgICAgICAgICAgICAgIGN1cnJlbnRDb2xvci5nID0gbWluKGN1cnJlbnRDb2xvci5nLCAyNTUpOwogICAgICAgICAgICAgICAgY3VycmVudENvbG9yLmcgPSBtYXgoY3VycmVudENvbG9yLmcsIDApOwoKICAgICAgICAgICAgICAgIGN1cnJlbnRDb2xvci5iICs9ICh0YXJnZXRDb2xvci5iIC0gY3VycmVudENvbG9yLmIpICogMC4wMTsKICAgICAgICAgICAgICAgIGN1cnJlbnRDb2xvci5iID0gbWluKGN1cnJlbnRDb2xvci5iLCAyNTUpOwogICAgICAgICAgICAgICAgY3VycmVudENvbG9yLmIgPSBtYXgoY3VycmVudENvbG9yLmIsIDApOwoKICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgMTk4MCwgMTA4MCk7CiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGJnLCAwLCAwKTsKICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UobWFzaywgOTU0LCA5OSk7CgogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICIjOTdhZGJiIjsgLy8g5pe26Ze055qE6aKc6ImyCiAgICAgICAgICAgICAgICBjdHguZm9udCA9ICIzMnB0IEltcGFjdCI7CgogICAgICAgICAgICAgICAgY3R4LnRyYW5zZm9ybSgxLCAyLjA1ICogKE1hdGguUEkgLyAxODApLCAwLCAxLCAwLCAwKTsKCiAgICAgICAgICAgICAgICB2YXIgdGltZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoCiAgICAgICAgICAgICAgICAgICAgKHRpbWUuZ2V0SG91cnMoKSA8IDEwID8gIjAiIDogIiIpICsKICAgICAgICAgICAgICAgICAgICB0aW1lLmdldEhvdXJzKCkudG9TdHJpbmcoKSArCiAgICAgICAgICAgICAgICAgICAgIjoiICsKICAgICAgICAgICAgICAgICAgICAodGltZS5nZXRNaW51dGVzKCkgPCAxMCA/ICIwIiA6ICIiKSArCiAgICAgICAgICAgICAgICAgICAgdGltZS5nZXRNaW51dGVzKCkgKwogICAgICAgICAgICAgICAgICAgICI6IiArCiAgICAgICAgICAgICAgICAgICAgKHRpbWUuZ2V0U2Vjb25kcygpIDwgMTAgPyAiMCIgOiAiIikgKwogICAgICAgICAgICAgICAgICAgIHRpbWUuZ2V0U2Vjb25kcygpLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgNzI1LAogICAgICAgICAgICAgICAgICAgIDMxOAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGN0eC5yZXNldFRyYW5zZm9ybSgpOwoKICAgICAgICAgICAgICAgIC8vIOaXpeWOhuacrAogICAgICAgICAgICAgICAgY3R4LnRyYW5zZm9ybSgwLjk2NDUsIDAsIDAgKiAoTWF0aC5QSSAvIDE4MCksIDAuOTYsIDk2NywgMTAwKTsKICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoNiAqIChNYXRoLlBJIC8gMTgwKSk7CgogICAgICAgICAgICAgICAgaWYgKCFub1JpbGkpIHsKICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKHJpbGksIDAsIDApOwoKICAgICAgICAgICAgICAgICAgICBjdHgucmVzZXRUcmFuc2Zvcm0oKTsKCiAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zZm9ybSgwLjk2NDUsIDAsIDkgKiAoTWF0aC5QSSAvIDE4MCksIDEsIDgyNSwgMTYwKTsKICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKDcgKiAoTWF0aC5QSSAvIDE4MCkpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRhcmdldENvbG9yID0ge3I6IDgwLCBnOiAxMjAsIGI6IDE2OX07CgogICAgICAgICAgICAgICAgaWYgKG5pZ2h0KSB7CiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q29sb3IgPSB7cjogMjU1LCBnOiA3NSwgYjogODB9OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghbm9SaWxpKSB7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICJyZ2JhKDAsMCwwLDAuNSkiOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgtMTAsIDMyMCwgNjUwLCAyKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3JUb1JnYihjdXJyZW50Q29sb3IpOwoKICAgICAgICAgICAgICAgIGlmICghbm9SaWxpKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDMyOyBpIDwgOTU7IGkrKykKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAgKiAoaSAtIDMyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIwICsgKDMwMCAtIDMwMCAqIGFuaW1EYXRhW2ldKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAzMDAgKiBhbmltRGF0YVtpXQogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDMyOyBpIDwgOTU7IGkrKykKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgNDAgKyA3LjUgKiAoaSAtIDMyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDMwICsgKDMwMCAtIDMwMCAqIGFuaW1EYXRhW2ldKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAzMDAgKiBhbmltRGF0YVtpXQogICAgICAgICAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgIGN0eC5yZXNldFRyYW5zZm9ybSgpOwoKICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAib3ZlcmxheSI7CiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGxpZ2h0LCA5NzEsIDE5Nyk7CiAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gInNvdXJjZS1vdmVyIjsKCiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGNhaWRhaSwgOTQ5LCAyNSk7CiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKHR3bywgMTMxOSwgMzQ1KTsKCiAgICAgICAgICAgICAgICAvLyDlpJzpl7TlhYnnhacKICAgICAgICAgICAgICAgIGlmIChuaWdodCAmJiBsaWdodENvbG9yLmEgPCAwLjcpIHsKICAgICAgICAgICAgICAgICAgICBsaWdodENvbG9yLmEgKz0gMC4wMDU7CiAgICAgICAgICAgICAgICAgICAgbGlnaHRDb2xvci5hID0gbWluKGxpZ2h0Q29sb3IuYSwgMC43KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIW5pZ2h0KSB7CiAgICAgICAgICAgICAgICAgICAgbGlnaHRDb2xvci5hIC09IDAuMDA1OwogICAgICAgICAgICAgICAgICAgIGxpZ2h0Q29sb3IuYSA9IG1heChsaWdodENvbG9yLmEsIDAuMCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGxpZ2h0Q29sb3IuYSA+IDApIHsKICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gImhhcmQtbGlnaHQiOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvclRvUmdiYShsaWdodENvbG9yKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgMTk4MCwgMTA4MCk7CiAgICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICJzb3VyY2Utb3ZlciI7CgogICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IGxpZ2h0Q29sb3IuYSAvIDAuNzsKICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKHBob25lTGlnaHQsIDg2MCwgNDM3KTsKICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIOWxj+W5lQogICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShzY3JlZW5JbWFnZSwgMCwgMCk7CiAgICAgICAgICAgICAgICBpZiAobGlnaHRDb2xvci5hID4gMCkgewogICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IGxpZ2h0Q29sb3IuYSAvIDAuNzsKICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKHNjcmVlbkxpZ2h0LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG5pZ2h0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHZhciBncmVldGluZyA9ICLlh4zmmajllaYhIjsKCiAgICAgICAgICAgICAgICBwaG9uZVRleHQuZm9yRWFjaCgodikgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICh0aW1lLmdldEhvdXJzKCkgPj0gdi50aW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdyZWV0aW5nID0gdi50ZXh0OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICh0aW1lLmdldEhvdXJzKCkgPj0gNiAmJiB0aW1lLmdldEhvdXJzKCkgPD0gMTgpIHsKICAgICAgICAgICAgICAgICAgICBuaWdodCA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG5pZ2h0ID0gZGVidWcgPyAhbmlnaHQgOiBuaWdodDsKCiAgICAgICAgICAgICAgICAvLyDmiYvmnLoKICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAiIzAwMCI7CiAgICAgICAgICAgICAgICBjdHguZm9udCA9ICIzMS4wMnB0IFNpbUhlaSI7CgogICAgICAgICAgICAgICAgY3R4LnRyYW5zZm9ybSgKICAgICAgICAgICAgICAgICAgICAxLjA5MTEsCiAgICAgICAgICAgICAgICAgICAgLTM1ICogKE1hdGguUEkgLyAxODApLAogICAgICAgICAgICAgICAgICAgIDAsCiAgICAgICAgICAgICAgICAgICAgMC41ODY4LAogICAgICAgICAgICAgICAgICAgIDExMzIuOTQsCiAgICAgICAgICAgICAgICAgICAgNTY0LjA3CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgY3R4LnJvdGF0ZSg1Ni41ICogKE1hdGguUEkgLyAxODApKTsKICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAiY2VudGVyIjsKICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAiI2ZmZiI7CiAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoZ3JlZXRpbmcsIDEzNSwgMTAwKTsKICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAic3RhcnQiOwogICAgICAgICAgICAgICAgY3R4LnJlc2V0VHJhbnNmb3JtKCk7CgogICAgICAgICAgICAgICAgZGlzcGxheUN0eC5kcmF3SW1hZ2UoY3ZzLCAwLCAwLCBkaXNwbGF5LndpZHRoLCBkaXNwbGF5LmhlaWdodCk7CiAgICAgICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTsKICAgICAgICB9LAogICAgICAgIC8vIOmSiOWvuemmlumhteaMgui9veWFg+e0oAogICAgICAgIG1vdW50ZWRFbGVtZW50KCkgewogICAgICAgICAgICBsZXQgZmFudGFzeSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImZhbnRhc3kiKVswXTsKICAgICAgICAgICAgbGV0IGJhbm5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImJhbm5lciIpWzBdOwogICAgICAgICAgICAvLyDljrvmjonpu5HoibLmoIXmoLzog4zmma8KICAgICAgICAgICAgYmFubmVyLnN0eWxlLmJhY2tncm91bmQgPSAibm9uZSI7CiAgICAgICAgICAgIGZhbnRhc3kgJiYgYmFubmVyICYmIGJhbm5lci5hcHBlbmRDaGlsZChmYW50YXN5KTsKICAgICAgICB9LAogICAgICAgIGNsZWFyQmFubmVyQ29sb3IoKSB7CiAgICAgICAgICAgIGxldCBiYW5uZXJDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImJhbm5lci1jb2xvciIpWzBdOwogICAgICAgICAgICBpZiAoYmFubmVyQ29sb3IpIHsKICAgICAgICAgICAgICAgIGJhbm5lckNvbG9yLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYmFubmVyQ29sb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgIH0sCn07Cg=="},{"version":3,"sources":["Fantasy.vue"],"names":[],"mappings":";AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Fantasy.vue","sourceRoot":"docs/.vuepress/components","sourcesContent":["<template>\n    <div class=\"fantasy\">\n        <canvas id=\"cvs\" class=\"hidden\" width=\"1980\" height=\"1080\"></canvas>\n        <canvas id=\"screenImage\" class=\"hidden\" width=\"234\" height=\"357\"></canvas>\n        <canvas id=\"rili\" class=\"hidden\" width=\"600\" height=\"600\"></canvas>\n        <canvas id=\"display\"></canvas>\n    </div>\n</template>\n\n<script>\nexport default {\n    mounted() {\n        // 只有一个 fantasy 元素，防止重复加载多个图片\n        if (document.getElementsByClassName(\"fantasy\")?.length === 1) {\n            // 如果使用 IndexBigImg.vue，则去掉该组件提供的时间罩\n            this.clearBannerColor();\n            // 如果是在首页注册该组件，则挂载到正确的位置\n            if (this.$attrs.index) {\n                this.mountedElement();\n            }\n            this.init();\n        }\n    },\n    methods: {\n        init() {\n            var cvs = document.getElementById(\"cvs\");\n            if (!cvs) {\n                return;\n            }\n            var ctx = cvs.getContext(\"2d\");\n\n            var display = document.getElementById(\"display\");\n            var displayCtx = display.getContext(\"2d\");\n\n            var screenImage = document.getElementById(\"screenImage\");\n            var screenImageCtx = screenImage.getContext(\"2d\");\n\n            var rili = document.getElementById(\"rili\");\n            var riliCtx = rili.getContext(\"2d\");\n\n            var songInfo = {};\n            var AllTimeBak = 0;\n            var NowBak = 0;\n            var DrawWarning = false;\n            var EnMonth = false;\n\n            // 出处：https://blog.csdn.net/u012601195/article/details/47860617\n            function drawRili() {\n                riliCtx.clearRect(0, 0, 600, 600);\n                var date = new Date();\n                var year = date.getYear();\n                var mouth = date.getMonth();\n                var today = date.getDate();\n                var week = date.getDay();\n\n                var cardSize = 40;\n\n                var array_three = [4, 6, 9, 11];\n                var array_threeone = [1, 3, 5, 7, 8, 10, 12];\n                var array_week = [\"SUN\", \"MON\", \"TUES\", \"WED\", \"THUR\", \"FRI\", \"SAT\"];\n\n                var firstDraw; //1号绘制位置\n                var wIdx = (today - 1) % 7;\n\n                if (week >= wIdx) {\n                    firstDraw = week - wIdx;\n                } else {\n                    firstDraw = week - wIdx + 7;\n                }\n\n                var dayIndex = 1;\n                var countDay = 30;\n\n                if (array_three.indexOf(mouth + 1) > -1) {\n                    countDay = 30;\n                } else if (array_threeone.indexOf(mouth + 1) > -1) {\n                    countDay = 31;\n                } else {\n                    if ((year % 4 == 0 && year % 100 != 0) || year % 400 == 0)\n                        countDay = 29;\n                    else countDay = 28;\n                }\n\n                var row = 6;\n                // if (7 - firstDraw + 7 * 4 < countDay) { //确定表格行数，防止日期绘制不全\n                //     row = 7;\n                //}\n\n                function drawTodaybg(i, j) {\n                    riliCtx.save();\n\n                    riliCtx.beginPath();\n                    riliCtx.strokeStyle = \"#900\";\n                    riliCtx.arc(\n                        45 + i * cardSize * 1.7 + cardSize / 1.18,\n                        50 + j * cardSize + cardSize / 2,\n                        cardSize / 2 - 10,\n                        -Math.PI,\n                        Math.PI * 1\n                    );\n                    riliCtx.stroke();\n                    riliCtx.closePath();\n\n                    riliCtx.beginPath();\n                    riliCtx.arc(\n                        45 + i * cardSize * 1.7 + cardSize / 1.18,\n                        50 + j * cardSize + cardSize / 2,\n                        cardSize / 2 - 9,\n                        -Math.PI,\n                        Math.PI * 0.9\n                    );\n                    riliCtx.stroke();\n                    riliCtx.closePath();\n\n                    riliCtx.beginPath();\n                    riliCtx.arc(\n                        45 + i * cardSize * 1.7 + cardSize / 1.18,\n                        50 + j * cardSize + cardSize / 2,\n                        cardSize / 2 - 8,\n                        -Math.PI,\n                        Math.PI * 0.8\n                    );\n                    riliCtx.stroke();\n                    riliCtx.closePath();\n\n                    riliCtx.beginPath();\n                    riliCtx.arc(\n                        45 + i * cardSize * 1.7 + cardSize / 1.18,\n                        50 + j * cardSize + cardSize / 2,\n                        cardSize / 2 - 7,\n                        -Math.PI,\n                        Math.PI * 0.7\n                    );\n                    riliCtx.stroke();\n                    riliCtx.closePath();\n\n                    riliCtx.beginPath();\n                    riliCtx.arc(\n                        45 + i * cardSize * 1.7 + cardSize / 1.18,\n                        50 + j * cardSize + cardSize / 2,\n                        cardSize / 2 - 6,\n                        -Math.PI,\n                        Math.PI * 0.6\n                    );\n                    riliCtx.stroke();\n                    riliCtx.closePath();\n\n                    riliCtx.restore();\n                }\n\n                var isNum = /^\\\\d+(\\\\d+)?$/;\n\n                function drawDate(txt, i, j) {\n                    riliCtx.textAlign = \"center\";\n                    riliCtx.fillStyle = \"rgb(69,68,84)\";\n                    riliCtx.font = cardSize / 1.5 + \"px Impact\";\n                    var yOffest = 3;\n\n                    if ((j == 0 || j == 6) && isNum.test(txt)) {\n                        riliCtx.fillStyle = \"#900\";\n                    }\n\n                    riliCtx.fillText(\n                        txt.toString(),\n                        45 + j * cardSize * 1.7 + cardSize / 1.18,\n                        50 + i * cardSize + (cardSize / 3) * 2 + yOffest\n                    );\n\n                    if (txt == today) {\n                        drawTodaybg(j, i);\n                    }\n                }\n\n                riliCtx.fillStyle = \"rgb(69,68,84)\";\n                riliCtx.font = \"900 26pt SimHei\";\n                riliCtx.textAlign = \"center\";\n                var monthCN = [\n                    \"一\",\n                    \"二\",\n                    \"三\",\n                    \"四\",\n                    \"五\",\n                    \"六\",\n                    \"七\",\n                    \"八\",\n                    \"九\",\n                    \"十\",\n                    \"十一\",\n                    \"十二\",\n                ];\n                var monthEN = [\n                    \" January\",\n                    \"February\",\n                    \"  March\",\n                    \"  April\",\n                    \"   May\",\n                    \"  June\",\n                    \"  July\",\n                    \" August\",\n                    \"September\",\n                    \" October\",\n                    \"November\",\n                    \" December\",\n                ];\n\n                if (EnMonth) {\n                    riliCtx.scale(1.1, 1);\n                    riliCtx.fillText(monthEN[mouth], 245, 32);\n                    riliCtx.resetTransform();\n                } else {\n                    riliCtx.scale(1.1, 1);\n                    riliCtx.fillText(monthCN[mouth] + \"月\", 260, 32);\n                    riliCtx.resetTransform();\n\n                    riliCtx.font = \"20pt SimHei\";\n                    riliCtx.textAlign = \"end\";\n                    riliCtx.fillText(today + \"日\", 520, 38);\n                }\n\n                for (var i = 0; i < row; i++) {\n                    for (var j = 0; j < 7; j++) {\n                        riliCtx.strokeRect(\n                            45 + j * cardSize * 1.7,\n                            50 + i * cardSize,\n                            cardSize * 1.7,\n                            cardSize\n                        );\n                    }\n                }\n\n                dayIndex = 1;\n\n                for (var i = 0; i < row; i++) {\n                    //开始绘制日期数\n                    for (var j = 0; j < 7; j++) {\n                        if (i == 0) {\n                            //表格第一行绘制星期\n                            drawDate(array_week[j], i, j);\n                            continue;\n                        }\n\n                        if (i == 1 && j < firstDraw) {\n                            //确定1号绘制位置\n                            continue;\n                        }\n\n                        if (dayIndex > countDay) {\n                            //只绘制月份的天数\n                            break;\n                        }\n\n                        drawDate(dayIndex++, i, j);\n                    }\n                }\n            }\n\n            var riliInterval = setInterval(drawRili, 3600000);\n            drawRili();\n\n            // Canvas奇妙的剪切蒙版实现\n            var screenMask = new Image();\n            screenMask.src = this.$withBase('/fantasy/Screenmask.png');\n\n            var screen = new Image();\n            screen.src = this.$withBase('/fantasy/screen.png');\n\n            var iv = setInterval(() => {\n                if (screen.complete && screenMask.complete) {\n                    // 可以切换图片的位置，也可以换成自己的图片\n                    screenImageCtx.drawImage(screen, -300, -50, 1280, 720);\n                    screenImageCtx.globalCompositeOperation = \"destination-atop\";\n                    screenImageCtx.drawImage(screenMask, 0, 0);\n                    screenImageCtx.globalCompositeOperation = \"source-over\";\n                    clearInterval(iv);\n                }\n            }, 14);\n\n            // 奇妙的屏幕大小自适应\n            window.onresize = function () {\n                display.width = window.innerWidth;\n                if (window.innerWidth / window.innerHeight > 1.8333333333333) {\n                    display.height = (window.innerWidth / 1980) * 1080;\n                    // window.scrollTo(0, (window.innerHeight - 123) / 16);\n                } else {\n                    display.height = window.innerHeight;\n                }\n            };\n\n            window.onresize();\n\n            // 加载图片\n            var bg = new Image();\n            bg.src = this.$withBase('/fantasy/bg.png');\n\n            var mask = new Image();\n            mask.src = this.$withBase('/fantasy/mask.png');\n\n            var light = new Image();\n            light.src = this.$withBase('/fantasy/light.png');\n\n            var caidai = new Image();\n            caidai.src = this.$withBase('/fantasy/caidai.png');\n\n            // /fantasy/Screenmask.png\n            var two = new Image();\n            two.src = this.$withBase('/fantasy/22.png');\n\n            var screenLight = new Image();\n            screenLight.src = this.$withBase('/fantasy/screenLight.png');\n\n            var phoneLight = new Image();\n            phoneLight.src = this.$withBase('/fantasy/phoneLight.png');\n\n            var phoneText = JSON.parse(\n                '[{\"time\":0,\"text\":\"凌晨啦!\"},{\"time\":6,\"text\":\"早上好!\"},{\"time\":8,\"text\":\"上午好!\"},{\"time\":11,\"text\":\"你吃了吗\"},{\"time\":13,\"text\":\"下午好鸭!\"},{\"time\":16,\"text\":\"傍晚咯!\"},{\"time\":19,\"text\":\"晚安!\"}]'\n            );\n\n            var noRili = false;\n            var updateSongInfoHandler = -1;\n\n            var data = new Array(128);\n            var animData = new Array(128);\n            var SoundPlaying = false;\n\n            // 奇妙的初始化\n            for (var i = 0; i < 128; i++) {\n                data[i] = animData[i] = 0;\n            }\n\n            // 奇妙的Normalize\n            var peakValue = 1;\n            if (window.wallpaperRegisterAudioListener) {\n                window.wallpaperRegisterAudioListener(function (audioData) {\n                    var max = 0;\n\n                    for (var i = 0; i < 128; i++) {\n                        if (audioData[i] > max) max = audioData[i];\n                    }\n\n                    peakValue = peakValue * 0.99 + max * 0.01;\n\n                    for (i = 0; i < 64; i++) {\n                        data[63 - i] = audioData[i] / peakValue;\n                    }\n\n                    for (i = 0; i < 64; i++) {\n                        data[127 - i] = audioData[127 - i];\n                    }\n                });\n            } else {\n                var iva;\n                let audio = document.getElementsByClassName(\"aplayer-button\")[0];\n                if (audio) {\n                    audio.onclick = () => {\n                        let play = document.getElementsByClassName(\"aplayer-play\")[0];\n                        if (play) {\n                            iva = setInterval(() => {\n                                for (i = 0; i < 64; i++) {\n                                    peakValue = peakValue * 0.99 + 1 * 0.01;\n                                    data[63 - i] =\n                                        ((Math.random() * 0.4) / peakValue) * Math.random();\n                                }\n                                for (i = 0; i < 64; i++) {\n                                    data[127 - i] = Math.random() * 0.2 * Math.random();\n                                }\n                                // for (var i = 0; i < 128; i++) {\n                                //     data[i] = Math.random();\n                                // }\n                            }, 130);\n                        } else {\n                            clearInterval(iva);\n                            for (var i = 0; i < 128; i++) {\n                                data[i] = animData[i] = 0;\n                            }\n                        }\n                    };\n                }\n            }\n\n            // ....\n            function min(a, b) {\n                return a > b ? b : a;\n            }\n\n            function max(a, b) {\n                return a > b ? a : b;\n            }\n\n            // 奇妙的颜色变化\n            var targetColor = {r: 80, g: 120, b: 169};\n            var currentColor = {r: 80, g: 120, b: 169};\n            var lightColor = {r: 0, g: 34, b: 77, a: 0};\n\n            function colorToRgb(color) {\n                return (\n                    \"rgb(\" +\n                    color.r.toString() +\n                    \",\" +\n                    color.g.toString() +\n                    \",\" +\n                    color.b.toString() +\n                    \")\"\n                );\n            }\n\n            function colorToRgba(colorWithA) {\n                return (\n                    \"rgba(\" +\n                    colorWithA.r.toString() +\n                    \",\" +\n                    colorWithA.g.toString() +\n                    \",\" +\n                    colorWithA.b.toString() +\n                    \",\" +\n                    colorWithA.a.toString() +\n                    \")\"\n                );\n            }\n\n            var night = false;\n            var debug = false;\n\n            // Canvas的奇妙冒险!\n            function render() {\n                for (var i = 0; i < 128; i++) {\n                    animData[i] += (data[i] - animData[i]) * 0.3;\n                    animData[i] = min(animData[i], 1);\n                }\n\n                currentColor.r += (targetColor.r - currentColor.r) * 0.01;\n                currentColor.r = min(currentColor.r, 255);\n                currentColor.r = max(currentColor.r, 0);\n\n                currentColor.g += (targetColor.g - currentColor.g) * 0.01;\n                currentColor.g = min(currentColor.g, 255);\n                currentColor.g = max(currentColor.g, 0);\n\n                currentColor.b += (targetColor.b - currentColor.b) * 0.01;\n                currentColor.b = min(currentColor.b, 255);\n                currentColor.b = max(currentColor.b, 0);\n\n                ctx.clearRect(0, 0, 1980, 1080);\n                ctx.drawImage(bg, 0, 0);\n                ctx.drawImage(mask, 954, 99);\n\n                ctx.fillStyle = \"#97adbb\"; // 时间的颜色\n                ctx.font = \"32pt Impact\";\n\n                ctx.transform(1, 2.05 * (Math.PI / 180), 0, 1, 0, 0);\n\n                var time = new Date();\n                ctx.fillText(\n                    (time.getHours() < 10 ? \"0\" : \"\") +\n                    time.getHours().toString() +\n                    \":\" +\n                    (time.getMinutes() < 10 ? \"0\" : \"\") +\n                    time.getMinutes() +\n                    \":\" +\n                    (time.getSeconds() < 10 ? \"0\" : \"\") +\n                    time.getSeconds().toString(),\n                    725,\n                    318\n                );\n                ctx.resetTransform();\n\n                // 日历本\n                ctx.transform(0.9645, 0, 0 * (Math.PI / 180), 0.96, 967, 100);\n                ctx.rotate(6 * (Math.PI / 180));\n\n                if (!noRili) {\n                    ctx.drawImage(rili, 0, 0);\n\n                    ctx.resetTransform();\n\n                    ctx.transform(0.9645, 0, 9 * (Math.PI / 180), 1, 825, 160);\n                    ctx.rotate(7 * (Math.PI / 180));\n                }\n\n                targetColor = {r: 80, g: 120, b: 169};\n\n                if (night) {\n                    targetColor = {r: 255, g: 75, b: 80};\n                }\n\n                if (!noRili) {\n                    ctx.fillStyle = \"rgba(0,0,0,0.5)\";\n                    ctx.fillRect(-10, 320, 650, 2);\n                }\n\n                ctx.fillStyle = colorToRgb(currentColor);\n\n                if (!noRili) {\n                    for (var i = 32; i < 95; i++)\n                        ctx.fillRect(\n                            10 * (i - 32),\n                            20 + (300 - 300 * animData[i]),\n                            4,\n                            300 * animData[i]\n                        );\n                } else\n                    for (var i = 32; i < 95; i++)\n                        ctx.fillRect(\n                            40 + 7.5 * (i - 32),\n                            30 + (300 - 300 * animData[i]),\n                            4,\n                            300 * animData[i]\n                        );\n\n                ctx.resetTransform();\n\n                ctx.globalCompositeOperation = \"overlay\";\n                ctx.drawImage(light, 971, 197);\n                ctx.globalCompositeOperation = \"source-over\";\n\n                ctx.drawImage(caidai, 949, 25);\n                ctx.drawImage(two, 1319, 345);\n\n                // 夜间光照\n                if (night && lightColor.a < 0.7) {\n                    lightColor.a += 0.005;\n                    lightColor.a = min(lightColor.a, 0.7);\n                } else if (!night) {\n                    lightColor.a -= 0.005;\n                    lightColor.a = max(lightColor.a, 0.0);\n                }\n\n                if (lightColor.a > 0) {\n                    ctx.globalCompositeOperation = \"hard-light\";\n                    ctx.fillStyle = colorToRgba(lightColor);\n                    ctx.fillRect(0, 0, 1980, 1080);\n                    ctx.globalCompositeOperation = \"source-over\";\n\n                    ctx.globalAlpha = lightColor.a / 0.7;\n                    ctx.drawImage(phoneLight, 860, 437);\n                    ctx.globalAlpha = 1;\n                }\n\n                // 屏幕\n                ctx.drawImage(screenImage, 0, 0);\n                if (lightColor.a > 0) {\n                    ctx.globalAlpha = lightColor.a / 0.7;\n                    ctx.drawImage(screenLight, 0, 0);\n                    ctx.globalAlpha = 1;\n                }\n\n                night = true;\n                var greeting = \"凌晨啦!\";\n\n                phoneText.forEach((v) => {\n                    if (time.getHours() >= v.time) {\n                        greeting = v.text;\n                    }\n                });\n\n                if (time.getHours() >= 6 && time.getHours() <= 18) {\n                    night = false;\n                }\n\n                night = debug ? !night : night;\n\n                // 手机\n                ctx.fillStyle = \"#000\";\n                ctx.font = \"31.02pt SimHei\";\n\n                ctx.transform(\n                    1.0911,\n                    -35 * (Math.PI / 180),\n                    0,\n                    0.5868,\n                    1132.94,\n                    564.07\n                );\n                ctx.rotate(56.5 * (Math.PI / 180));\n                ctx.textAlign = \"center\";\n                ctx.fillStyle = \"#fff\";\n                ctx.fillText(greeting, 135, 100);\n                ctx.textAlign = \"start\";\n                ctx.resetTransform();\n\n                displayCtx.drawImage(cvs, 0, 0, display.width, display.height);\n                window.requestAnimationFrame(render);\n            }\n\n            window.requestAnimationFrame(render);\n        },\n        // 针对首页挂载元素\n        mountedElement() {\n            let fantasy = document.getElementsByClassName(\"fantasy\")[0];\n            let banner = document.getElementsByClassName(\"banner\")[0];\n            // 去掉黑色栅格背景\n            banner.style.background = \"none\";\n            fantasy && banner && banner.appendChild(fantasy);\n        },\n        clearBannerColor() {\n            let bannerColor = document.getElementsByClassName(\"banner-color\")[0];\n            if (bannerColor) {\n                bannerColor.parentNode.removeChild(bannerColor);\n            }\n        },\n    },\n};\n</script>\n\n<style>\n.fantasy {\n    position: fixed;\n    top: 0;\n    height: 100vh;\n    width: 100%;\n    z-index: -9;\n}\n\n.hidden {\n    display: none;\n}\n\n#display {\n    margin: auto;\n}\n\n/* 图片大小 */\n.vdoing-index-class .home-wrapper .banner {\n    margin-top: 0 !important;\n    height: 100vh;\n    background-attachment: fixed !important;\n}\n\n/* 图片中间的签名和标题位置 */\n.banner-conent {\n    margin-top: 23vh !important;\n}\n</style>\n</resource>"]}]}