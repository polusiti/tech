{"remainingRequest":"/home/higuc/polusiti-tech/slee/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/higuc/polusiti-tech/slee/docs/.vuepress/components/Twikoo.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/higuc/polusiti-tech/slee/docs/.vuepress/components/Twikoo.vue","mtime":1761321001137},{"path":"/home/higuc/polusiti-tech/slee/node_modules/cache-loader/dist/cjs.js","mtime":1761329323494},{"path":"/home/higuc/polusiti-tech/slee/node_modules/babel-loader/lib/index.js","mtime":1761329323866},{"path":"/home/higuc/polusiti-tech/slee/node_modules/cache-loader/dist/cjs.js","mtime":1761329323494},{"path":"/home/higuc/polusiti-tech/slee/node_modules/vue-loader/lib/index.js","mtime":1761329324398}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmxldCB3YWl0VGltZSA9IDcwMDsgLy8g6aG16Z2i5Yqg6L295ZCO5aSa5bCR5q+r56eS5ZCO5Yqg6L296K+E6K665Yy677yI5aaC5p6c5pivIDBtc++8jOWPr+iDveS8muaKpemUme+8iQpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHR3aWtvbzogIiIsCiAgICAgICAgICAgIGZpcnN0TG9hZDogdHJ1ZSwKICAgICAgICB9OwogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgLy8g5LiN5Yid5aeL5YyW6K+E6K665Yy655qE6aG16Z2i77yaZnJvbnRtYXR0ZXIg55qEIGNvbW1lbnQ6IGZhbHNlIOeahOaWh+eroOmhteOAgemmlumhteOAgeW9kuaho+mhteOAgTQwNCDpobXpnaIKICAgICAgICBpZiAoCiAgICAgICAgICAgICh0aGlzLiRmcm9udG1hdHRlci5jb21tZW50ID09IHVuZGVmaW5lZCB8fCB0aGlzLiRmcm9udG1hdHRlci5jb21tZW50KSAmJgogICAgICAgICAgICB0aGlzLiRyb3V0ZS5wYXRoICE9ICIvIiAmJgogICAgICAgICAgICAhdGhpcy5vdGhlclBhZ2UodGhpcy4kcm91dGUpICYmCiAgICAgICAgICAgICF0aGlzLmlzRm91clplcm9Gb3VyKHRoaXMuJHJvdXRlKQogICAgICAgICkgewogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMudHdpa29vSW5pdCgpOwogICAgICAgICAgICB9LCB3YWl0VGltZSk7CiAgICAgICAgfQogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgJHJvdXRlKHRvLCBmcm9tKSB7CiAgICAgICAgICAgIC8vIDQwNCDpobXpnaLjgIHkuI3lkIznmoTmoIfpopjkvJrop6blj5Hot6/nlLHvvIznpoHmraLmjokKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgdGhpcy4kcm91dGUucGF0aCA9PSAiLyIgfHwKICAgICAgICAgICAgICAgIHRoaXMub3RoZXJQYWdlKHRoaXMuJHJvdXRlKSB8fAogICAgICAgICAgICAgICAgdGhpcy4kcm91dGUuaGFzaCAhPSAiIiB8fAogICAgICAgICAgICAgICAgdGhpcy5pc0ZvdXJaZXJvRm91cih0bykKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8g6L+b5YWl6aaW6aG144CB6L+b5YWlIGZyb250bWF0dGVyIOeahCBjb21tZW50OiBmYWxzZSDpobXpnaLvvIzliKDpmaTor4TorrrljLoKICAgICAgICAgICAgaWYgKHRvLnBhdGggPT0gIi8iIHx8IHRoaXMuZ2V0Q29tbWVudEJ5RnJvbnRtYXR0ZXIodG8pID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUNvbW1lbnQoKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyDliJ3lp4vljJbor4TorrrmnaHku7bvvJrmnaXoh6rpppbpobXvvIzmnaXoh6rlvZLmoaPpobXjgIHmnaXoh6ogZnJvbnRtYXR0ZXIg55qEIGNvbW1lbnQ6IHRydWUg55qE5paH56ug6aG1CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGZyb20ucGF0aCA9PSAiLyIgfHwKICAgICAgICAgICAgICAgIHRoaXMub3RoZXJQYWdlKGZyb20pIHx8CiAgICAgICAgICAgICAgICAhdGhpcy5nZXRDb21tZW50QnlGcm9udG1hdHRlcihmcm9tKQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHRoaXMuZmlyc3RMb2FkCiAgICAgICAgICAgICAgICAgICAgPyBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50d2lrb29Jbml0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyc3RMb2FkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfSwgd2FpdFRpbWUpCiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnR3aWtvb0luaXQoKTsgLy8g5aaC5p6c5Yqg6L296L+H5LiA5qyh6K+E6K665Yy677yM5YiZ55u05o6l6I635Y+WCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy4kcm91dGUucGF0aCAhPSAiLyIgJiYgdGhpcy4kcm91dGUuaGFzaCA9PSAiIikgewogICAgICAgICAgICAgICAgLy8g5paH56ug6aG15LmL6Ze06Lez6L2s77yM6YeN5paw6I635Y+W6K+E6K66CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbW1lbnQoKTsKICAgICAgICAgICAgICAgIH0sIHdhaXRUaW1lKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIHR3aWtvb0luaXQoKSB7CiAgICAgICAgICAgIHR3aWtvbwogICAgICAgICAgICAgICAgLmluaXQoewogICAgICAgICAgICAgICAgICAgIC8vIGVudklkIOimgeWIh+aNouaIkOiHquW3seeahO+8jOi/meaYr+ivhOiuuuWMuueahCBJRO+8jOS4gOS4quWNmuWuouWPquiDveacieS4gOS4quivhOiuuuWMuiBJRO+8jOeUqOWIq+S6uueahOivhOiuuuWMuiBJRO+8jOWvvOiHtOivu+iAheivhOiuuuaXtuaIluWPkemAgeWIsOWIq+S6uueahOivhOiuuuWMuumHjAogICAgICAgICAgICAgICAgICAgIC8vIGVudklkOiAiaHR0cHM6Ly9tYWluLS1zdXBlci1sb2xseS0yNTg3NGIubmV0bGlmeS5hcHAvLm5ldGxpZnkvZnVuY3Rpb25zL3R3aWtvbyIsCiAgICAgICAgICAgICAgICAgICAgZW52SWQ6ICJodHRwczovL25ldGxpZnktY29tbWVudC5uZXRsaWZ5LmFwcC8ubmV0bGlmeS9mdW5jdGlvbnMvdHdpa29vIiwKICAgICAgICAgICAgICAgICAgICBlbDogIiN0Y29tbWVudCIsCiAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiAnYXAtaHViZWknLCAvLyDnjq/looPlnLDln5/vvIzpu5jorqTkuLogYXAtc2hhbmdoYWnvvIzlpoLmnpzmgqjnmoTnjq/looPlnLDln5/kuI3mmK/kuIrmtbfvvIzpnIDkvKDmraTlj4LmlbAKICAgICAgICAgICAgICAgICAgICBwYXRoOiAnd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lJywgLy8g55So5LqO5Yy65YiG5LiN5ZCM5paH56ug55qE6Ieq5a6a5LmJIGpzIOi3r+W+hO+8jOWmguaenOaCqOeahOaWh+eroOi3r+W+hOS4jeaYryBsb2NhdGlvbi5wYXRobmFtZe+8jOmcgOS8oOatpOWPguaVsAogICAgICAgICAgICAgICAgICAgIGxhbmc6ICd6aC1DTicsIC8vIOeUqOS6juaJi+WKqOiuvuWumuivhOiuuuWMuuivreiogO+8jOaUr+aMgeeahOivreiogOWIl+ihqCBodHRwczovL2dpdGh1Yi5jb20vaW1hZWdvby90d2lrb28vYmxvYi9kZXYvc3JjL2pzL3V0aWxzL2kxOG4vaW5kZXguanMKICAgICAgICAgICAgICAgICAgICAvLyBvbkNvbW1lbnRMb2FkZWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygi6K+E6K665Yqg6L295oiW6K+E6K665oiQ5YqfIik7CiAgICAgICAgICAgICAgICAgICAgLy8gfSwKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkVHdpa29vKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIC8vIOWIneWni+WMluWKoOi9veaIluiAhei3s+i9rOaWsOmhtemdoumHjeaWsOWKoOi9vSBUd2lrb28g6K+E6K665Yy6CiAgICAgICAgbG9hZFR3aWtvbygpIHsKICAgICAgICAgICAgbGV0IHBhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJwYWdlIilbMF07CiAgICAgICAgICAgIGxldCBjb21tZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInR3aWtvbyIpOwogICAgICAgICAgICAvLyBjb21tZW50IOS4jeWtmOWcqOS7o+ihqOabvuWIneWni+WMlui/h++8jOWQjumdouiiq+WIoOmZpAogICAgICAgICAgICBjb21tZW50ID8gKHRoaXMudHdpa29vID0gY29tbWVudCkgOiAoY29tbWVudCA9IHRoaXMudHdpa29vKTsKICAgICAgICAgICAgcGFnZQogICAgICAgICAgICAgICAgPyBjb21tZW50CiAgICAgICAgICAgICAgICAgICAgPyBwYWdlLmFwcGVuZENoaWxkKGNvbW1lbnQpCiAgICAgICAgICAgICAgICAgICAgOiBwYWdlLmFwcGVuZENoaWxkKHRoaXMudHdpa29vKQogICAgICAgICAgICAgICAgOiAiIjsKICAgICAgICAgICAgdGhpcy51cGRhdGVDb21tZW50KCk7CiAgICAgICAgfSwKICAgICAgICAvLyDot7PovazmlrDpobXpnaLvvIzph43mlrDojrflj5blvZPliY3pobXpnaLnmoTor4Torrrkv6Hmga8KICAgICAgICB1cGRhdGVDb21tZW50KCkgewogICAgICAgICAgICBsZXQgdGtfaWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInRrLWljb24iKVswXTsKICAgICAgICAgICAgdGtfaWNvbiA/IHRrX2ljb24uY2xpY2soKSA6IHVuZGVmaW5lZDsKICAgICAgICB9LAogICAgICAgIC8vIOWIoOmZpCBmcm9udG1hdHRlcjpjb21tZW50OiBmYWxzZSDpobXpnaLnmoTmlbDmja4KICAgICAgICBkZWxldGVDb21tZW50KCkgewogICAgICAgICAgICBsZXQgY29tbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0d2lrb28iKTsKICAgICAgICAgICAgY29tbWVudCA/IGNvbW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjb21tZW50KSA6ICIiOwogICAgICAgIH0sCiAgICAgICAgLy8g6I635Y+WIGZyb250bWF0dGVyIOeahCBjb21tZW50CiAgICAgICAgZ2V0Q29tbWVudEJ5RnJvbnRtYXR0ZXIocm91dGUpIHsKICAgICAgICAgICAgbGV0IGNvbW1lbnQgPSB0cnVlOwogICAgICAgICAgICB0aGlzLiRzaXRlLnBhZ2VzLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICAgICAgICAgIGlmIChpdGVtLnBhdGggPT0gcm91dGUucGF0aCkgewogICAgICAgICAgICAgICAgICAgIGNvbW1lbnQgPSBpdGVtLmZyb250bWF0dGVyLmNvbW1lbnQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gY29tbWVudDsKICAgICAgICB9LAogICAgICAgIC8vIOWIpOWumuW9k+WJjemhtemdouaYr+S4jeaYryA0MDQKICAgICAgICBpc0ZvdXJaZXJvRm91cihyb3V0ZSkgewogICAgICAgICAgICBsZXQgZmxhZyA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuJHNpdGUucGFnZXMuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgICAgICAgaWYgKGl0ZW0ucGF0aCA9PSByb3V0ZS5wYXRoKSB7CiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGZsYWc7CiAgICAgICAgfSwKICAgICAgICAvLyDlhbbku5bpobXpnaIKICAgICAgICBvdGhlclBhZ2Uocm91dGUpIHsKICAgICAgICAgICAgaWYoCiAgICAgICAgICAgICAgICByb3V0ZS5wYXRoID09ICIvYXJjaGl2ZXMvIiB8fAogICAgICAgICAgICAgICAgcm91dGUucGF0aCA9PSAiL2NhdGVnb3JpZXMvIiB8fAogICAgICAgICAgICAgICAgcm91dGUucGF0aCA9PSAiL3RhZ3MvIgogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAp9Owo="},{"version":3,"sources":["Twikoo.vue"],"names":[],"mappings":";AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Twikoo.vue","sourceRoot":"docs/.vuepress/components","sourcesContent":["<template>\n    <div id=\"tcomment\"></div>\n</template>\n<script>\nlet waitTime = 700; // 页面加载后多少毫秒后加载评论区（如果是 0ms，可能会报错）\nexport default {\n    data() {\n        return {\n            twikoo: \"\",\n            firstLoad: true,\n        };\n    },\n    mounted() {\n        // 不初始化评论区的页面：frontmatter 的 comment: false 的文章页、首页、归档页、404 页面\n        if (\n            (this.$frontmatter.comment == undefined || this.$frontmatter.comment) &&\n            this.$route.path != \"/\" &&\n            !this.otherPage(this.$route) &&\n            !this.isFourZeroFour(this.$route)\n        ) {\n            setTimeout(() => {\n                this.twikooInit();\n            }, waitTime);\n        }\n    },\n    watch: {\n        $route(to, from) {\n            // 404 页面、不同的标题会触发路由，禁止掉\n            if (\n                this.$route.path == \"/\" ||\n                this.otherPage(this.$route) ||\n                this.$route.hash != \"\" ||\n                this.isFourZeroFour(to)\n            ) {\n                return;\n            }\n            // 进入首页、进入 frontmatter 的 comment: false 页面，删除评论区\n            if (to.path == \"/\" || this.getCommentByFrontmatter(to) == false) {\n                this.deleteComment();\n                return;\n            }\n            // 初始化评论条件：来自首页，来自归档页、来自 frontmatter 的 comment: true 的文章页\n            if (\n                from.path == \"/\" ||\n                this.otherPage(from) ||\n                !this.getCommentByFrontmatter(from)\n            ) {\n                this.firstLoad\n                    ? setTimeout(() => {\n                        this.twikooInit();\n                        this.firstLoad = false;\n                    }, waitTime)\n                    : this.twikooInit(); // 如果加载过一次评论区，则直接获取\n            } else if (this.$route.path != \"/\" && this.$route.hash == \"\") {\n                // 文章页之间跳转，重新获取评论\n                setTimeout(() => {\n                    this.updateComment();\n                }, waitTime);\n            }\n        },\n    },\n    methods: {\n        twikooInit() {\n            twikoo\n                .init({\n                    // envId 要切换成自己的，这是评论区的 ID，一个博客只能有一个评论区 ID，用别人的评论区 ID，导致读者评论时或发送到别人的评论区里\n                    // envId: \"https://main--super-lolly-25874b.netlify.app/.netlify/functions/twikoo\",\n                    envId: \"https://netlify-comment.netlify.app/.netlify/functions/twikoo\",\n                    el: \"#tcomment\",\n                    region: 'ap-hubei', // 环境地域，默认为 ap-shanghai，如果您的环境地域不是上海，需传此参数\n                    path: 'window.location.pathname', // 用于区分不同文章的自定义 js 路径，如果您的文章路径不是 location.pathname，需传此参数\n                    lang: 'zh-CN', // 用于手动设定评论区语言，支持的语言列表 https://github.com/imaegoo/twikoo/blob/dev/src/js/utils/i18n/index.js\n                    // onCommentLoaded: function () {\n                    // console.log(\"评论加载或评论成功\");\n                    // },\n                })\n                .then(() => {\n                    this.loadTwikoo();\n                });\n        },\n        // 初始化加载或者跳转新页面重新加载 Twikoo 评论区\n        loadTwikoo() {\n            let page = document.getElementsByClassName(\"page\")[0];\n            let comment = document.getElementById(\"twikoo\");\n            // comment 不存在代表曾初始化过，后面被删除\n            comment ? (this.twikoo = comment) : (comment = this.twikoo);\n            page\n                ? comment\n                    ? page.appendChild(comment)\n                    : page.appendChild(this.twikoo)\n                : \"\";\n            this.updateComment();\n        },\n        // 跳转新页面，重新获取当前页面的评论信息\n        updateComment() {\n            let tk_icon = document.getElementsByClassName(\"tk-icon\")[0];\n            tk_icon ? tk_icon.click() : undefined;\n        },\n        // 删除 frontmatter:comment: false 页面的数据\n        deleteComment() {\n            let comment = document.getElementById(\"twikoo\");\n            comment ? comment.parentNode.removeChild(comment) : \"\";\n        },\n        // 获取 frontmatter 的 comment\n        getCommentByFrontmatter(route) {\n            let comment = true;\n            this.$site.pages.forEach((item) => {\n                if (item.path == route.path) {\n                    comment = item.frontmatter.comment;\n                }\n            });\n            return comment;\n        },\n        // 判定当前页面是不是 404\n        isFourZeroFour(route) {\n            let flag = true;\n            this.$site.pages.forEach((item) => {\n                if (item.path == route.path) {\n                    flag = false;\n                }\n            });\n            return flag;\n        },\n        // 其他页面\n        otherPage(route) {\n            if(\n                route.path == \"/archives/\" ||\n                route.path == \"/categories/\" ||\n                route.path == \"/tags/\"\n            ) {\n                return true;\n            }else {\n                return false;\n            }\n        }\n    },\n};\n</script>\n\n<style>\n.twikoo .tk-comments {\n    margin-top: 20px;\n}\n</style>"]}]}