{"remainingRequest":"/home/higuc/polusiti-tech/slee/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/higuc/polusiti-tech/slee/docs/.vuepress/components/Twikoo.vue?vue&type=style&index=0&id=fa3d79d8&lang=css","dependencies":[{"path":"/home/higuc/polusiti-tech/slee/docs/.vuepress/components/Twikoo.vue","mtime":1761321001137},{"path":"/home/higuc/polusiti-tech/slee/node_modules/css-loader/dist/cjs.js","mtime":1761329323866},{"path":"/home/higuc/polusiti-tech/slee/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1761329325641},{"path":"/home/higuc/polusiti-tech/slee/node_modules/postcss-loader/src/index.js","mtime":1761329323866},{"path":"/home/higuc/polusiti-tech/slee/node_modules/cache-loader/dist/cjs.js","mtime":1761329323494},{"path":"/home/higuc/polusiti-tech/slee/node_modules/vue-loader/lib/index.js","mtime":1761329324398}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci50d2lrb28gLnRrLWNvbW1lbnRzIHsKICAgIG1hcmdpbi10b3A6IDIwcHg7Cn0K"},{"version":3,"sources":["Twikoo.vue"],"names":[],"mappings":";AA4IA;AACA;AACA","file":"Twikoo.vue","sourceRoot":"docs/.vuepress/components","sourcesContent":["<template>\n    <div id=\"tcomment\"></div>\n</template>\n<script>\nlet waitTime = 700; // 页面加载后多少毫秒后加载评论区（如果是 0ms，可能会报错）\nexport default {\n    data() {\n        return {\n            twikoo: \"\",\n            firstLoad: true,\n        };\n    },\n    mounted() {\n        // 不初始化评论区的页面：frontmatter 的 comment: false 的文章页、首页、归档页、404 页面\n        if (\n            (this.$frontmatter.comment == undefined || this.$frontmatter.comment) &&\n            this.$route.path != \"/\" &&\n            !this.otherPage(this.$route) &&\n            !this.isFourZeroFour(this.$route)\n        ) {\n            setTimeout(() => {\n                this.twikooInit();\n            }, waitTime);\n        }\n    },\n    watch: {\n        $route(to, from) {\n            // 404 页面、不同的标题会触发路由，禁止掉\n            if (\n                this.$route.path == \"/\" ||\n                this.otherPage(this.$route) ||\n                this.$route.hash != \"\" ||\n                this.isFourZeroFour(to)\n            ) {\n                return;\n            }\n            // 进入首页、进入 frontmatter 的 comment: false 页面，删除评论区\n            if (to.path == \"/\" || this.getCommentByFrontmatter(to) == false) {\n                this.deleteComment();\n                return;\n            }\n            // 初始化评论条件：来自首页，来自归档页、来自 frontmatter 的 comment: true 的文章页\n            if (\n                from.path == \"/\" ||\n                this.otherPage(from) ||\n                !this.getCommentByFrontmatter(from)\n            ) {\n                this.firstLoad\n                    ? setTimeout(() => {\n                        this.twikooInit();\n                        this.firstLoad = false;\n                    }, waitTime)\n                    : this.twikooInit(); // 如果加载过一次评论区，则直接获取\n            } else if (this.$route.path != \"/\" && this.$route.hash == \"\") {\n                // 文章页之间跳转，重新获取评论\n                setTimeout(() => {\n                    this.updateComment();\n                }, waitTime);\n            }\n        },\n    },\n    methods: {\n        twikooInit() {\n            twikoo\n                .init({\n                    // envId 要切换成自己的，这是评论区的 ID，一个博客只能有一个评论区 ID，用别人的评论区 ID，导致读者评论时或发送到别人的评论区里\n                    // envId: \"https://main--super-lolly-25874b.netlify.app/.netlify/functions/twikoo\",\n                    envId: \"https://netlify-comment.netlify.app/.netlify/functions/twikoo\",\n                    el: \"#tcomment\",\n                    region: 'ap-hubei', // 环境地域，默认为 ap-shanghai，如果您的环境地域不是上海，需传此参数\n                    path: 'window.location.pathname', // 用于区分不同文章的自定义 js 路径，如果您的文章路径不是 location.pathname，需传此参数\n                    lang: 'zh-CN', // 用于手动设定评论区语言，支持的语言列表 https://github.com/imaegoo/twikoo/blob/dev/src/js/utils/i18n/index.js\n                    // onCommentLoaded: function () {\n                    // console.log(\"评论加载或评论成功\");\n                    // },\n                })\n                .then(() => {\n                    this.loadTwikoo();\n                });\n        },\n        // 初始化加载或者跳转新页面重新加载 Twikoo 评论区\n        loadTwikoo() {\n            let page = document.getElementsByClassName(\"page\")[0];\n            let comment = document.getElementById(\"twikoo\");\n            // comment 不存在代表曾初始化过，后面被删除\n            comment ? (this.twikoo = comment) : (comment = this.twikoo);\n            page\n                ? comment\n                    ? page.appendChild(comment)\n                    : page.appendChild(this.twikoo)\n                : \"\";\n            this.updateComment();\n        },\n        // 跳转新页面，重新获取当前页面的评论信息\n        updateComment() {\n            let tk_icon = document.getElementsByClassName(\"tk-icon\")[0];\n            tk_icon ? tk_icon.click() : undefined;\n        },\n        // 删除 frontmatter:comment: false 页面的数据\n        deleteComment() {\n            let comment = document.getElementById(\"twikoo\");\n            comment ? comment.parentNode.removeChild(comment) : \"\";\n        },\n        // 获取 frontmatter 的 comment\n        getCommentByFrontmatter(route) {\n            let comment = true;\n            this.$site.pages.forEach((item) => {\n                if (item.path == route.path) {\n                    comment = item.frontmatter.comment;\n                }\n            });\n            return comment;\n        },\n        // 判定当前页面是不是 404\n        isFourZeroFour(route) {\n            let flag = true;\n            this.$site.pages.forEach((item) => {\n                if (item.path == route.path) {\n                    flag = false;\n                }\n            });\n            return flag;\n        },\n        // 其他页面\n        otherPage(route) {\n            if(\n                route.path == \"/archives/\" ||\n                route.path == \"/categories/\" ||\n                route.path == \"/tags/\"\n            ) {\n                return true;\n            }else {\n                return false;\n            }\n        }\n    },\n};\n</script>\n\n<style>\n.twikoo .tk-comments {\n    margin-top: 20px;\n}\n</style>"]}]}